// ============================================
// EMOTIONAL INTELLIGENCE COPY - LOCAL ONLY
// NO API DEPENDENCIES - PURE TYPESCRIPT
// ============================================

export const EI_COPY = {
  coach: {
    tired: [
      "Low battery vibes ðŸ”‹ I know just the thing to recharge you.",
      "Running on fumes? Let's fuel you up with energy-boosting goodness.",
      "Exhausted mode activated ðŸ˜´ Time for some power-up food!",
      "Your body is asking for rest AND fuel. Let me find your recharge meal.",
      "Fatigue is just a signal - let's answer it with iron-rich, energizing options.",
      "Even on tired days, you deserve something delicious. Energy incoming!",
      "Sluggish feels? Complex carbs and protein are your best friends right now.",
      "Let's skip the caffeine crash and go for real, lasting energy foods.",
      "Your tank is empty - time to fill it with premium fuel! â›½",
      "Tiredness is temporary, but a great meal is memorable. Let's do this.",
      "Need a pick-me-up? I've got energizing options that won't let you down.",
      "Your body knows what it needs - let's give it some serious vitality.",
    ],
    stressed: [
      "Hey, take a deep breath with me ðŸ’« Food can actually calm your nervous system.",
      "Stress is temporary, comfort food is forever. Let's find your calm.",
      "Sending you a warm foodie hug ðŸ¤ Magnesium-rich foods to the rescue!",
      "When life gets chaotic, good food is your anchor. I've got you.",
      "Your cortisol needs a break. These options are scientifically calming.",
      "Stress eating, but make it healthy AND delicious. It's possible!",
      "Let's tackle that stress with some serious comfort food therapy.",
      "Your nervous system is working overtime - time for some TLC through food.",
      "Dark chocolate is literally medicine right now. Science says so! ðŸ«",
      "Stress happens to everyone. The good news? The right food actually helps.",
      "When everything feels like too much, start with one good meal.",
      "Let food be your reset button. These picks are pure comfort.",
    ],
    sad: [
      "Sending you so much warmth right now ðŸ’™ Let's nourish that heart.",
      "It's okay to not be okay. Food won't fix everything, but it helps.",
      "Blue days call for extra TLC and serotonin-boosting bites.",
      "Sadness is valid. So is treating yourself to something comforting.",
      "When the world feels heavy, let a good meal lift you just a little.",
      "Your feelings matter. So does feeding yourself with love today.",
      "Even on hard days, you deserve delicious food. Here's some comfort.",
      "Let food be a small act of kindness to yourself right now ðŸ¤—",
      "Mood-lifting nutrients exist! Tryptophan and vitamin D are calling.",
      "A warm meal won't solve everything, but it's a beautiful start.",
      "You matter, your wellbeing matters. Let's choose something nurturing.",
      "Sometimes the best medicine is a meal that feels like a hug.",
    ],
    happy: [
      "You're GLOWING today! ðŸŒŸ Let's match that energy with amazing food!",
      "That happiness is contagious! Time for a celebratory feast!",
      "When you're this happy, even salad sounds exciting. But let's go bigger!",
      "Joy looks amazing on you! Here's food that matches your sparkle âœ¨",
      "Your positivity is off the charts! Let's keep those vibes flowing!",
      "Feeling good feels GREAT! Let's amplify it with delicious choices!",
      "That smile deserves some equally bright, flavorful dishes!",
      "Happy brain, happy food! Let's celebrate this beautiful moment!",
      "Your joy is your superpower today - let's fuel it properly!",
      "This energy is EVERYTHING! Time for some truly special eats!",
      "When life is good, food tastes even better. Let's enjoy!",
      "Your vibe right now? Immaculate. Your food options? Even better.",
    ],
    anxious: [
      "Anxiety is tough, but you're tougher ðŸ’ª Let's find calming comfort food.",
      "When the mind races, the body needs grounding. I've got soothing options.",
      "Those butterflies need calming. Gentle, gut-healing foods incoming.",
      "Your nervous system needs a hug - and food can actually deliver one.",
      "Anxiety lies. You're doing better than you think. Now let's eat well.",
      "Deep breaths and good food. Omega-3s help regulate stress response.",
      "Let's turn that anxious energy into self-care through mindful eating.",
      "Warmth and comfort are what you need. These options deliver both.",
      "The best anti-anxiety foods are also delicious. Win-win!",
      "When worry visits, we answer with gentleness. Here's some calm on a plate.",
      "Probiotics and omega-3s aren't just buzzwords - they actually help anxiety.",
      "You don't have to feel this way forever. Start with one soothing meal.",
    ],
    calm: [
      "That peaceful energy is beautiful ðŸ§˜â€â™€ï¸ Let's nourish it gently.",
      "Serenity suits you! Here are grounding options to match your zen.",
      "In this calm state, your intuition about food is usually spot-on.",
      "Tranquility is its own reward. Let's complement it perfectly.",
      "Your calm is precious. Here are mindful meal options that honor it.",
      "Zen energy deserves zen food. Warm teas, gentle spices, perfect portions.",
      "When you're this centered, everything tastes better. Let's choose wisely.",
      "Peaceful vibe detected! These balanced options resonate with your energy.",
      "Calm minds make the best food choices. Here's some harmonious options.",
      "Your inner peace is glowing. Let's keep it flowing with nourishing picks.",
    ],
    energetic: [
      "That energy is FIRE! ðŸ”¥ Let's channel it with powerful fuel!",
      "You're unstoppable today! Here's protein-packed momentum!",
      "I love this energy! Bold, vibrant flavors for a bold, vibrant you!",
      "When you're this energetic, your metabolism is HUMMING! Feed it right!",
      "Power mode: ACTIVATED! Premium fuel for premium performance!",
      "That sparkle in your step deserves sparkly food! Let's go!",
      "Your vitality is contagious! Let's keep it going strong!",
      "Running at full speed? Only the best fuel will do!",
      "High energy = high-quality food needs. I've got you covered!",
      "You're on fire today! Let's match that with something amazing!",
    ],
    pms: [
      "Oh, I feel you ðŸŒ¸ Your body is doing a lot right now. Extra love incoming.",
      "Cravings are valid! Let's find satisfying options that actually help.",
      "Your body knows what it needs - often iron, magnesium, and yes, chocolate.",
      "This time calls for comfort AND care. Here's both in delicious form.",
      "Let's be gentle with ourselves today. Warming, comforting foods help.",
      "You're amazing for pushing through! Nutrients your body craves, right here.",
      "Dark chocolate, leafy greens, warming spices - your survival toolkit!",
      "Cramps? Mood swings? Let food be your ally. Magnesium is calling!",
      "Your body is working hard. Let's support it with what it needs.",
      "This is the time for extra self-care. These options are like a warm hug.",
    ],
    default: [
      "Let's find you something delicious! ðŸ½ï¸ Good food makes everything better.",
      "Ready to discover some amazing options? Let's make this meal memorable!",
      "Whatever you're feeling, the right food helps. Here's what I found!",
      "Food is love, and you deserve the best. Check out these picks!",
      "Let's turn your day around with something truly delicious!",
      "Not sure how you're feeling? That's okay! Great food works for any mood.",
      "Sometimes you just need good food. I've got you covered.",
      "Ready for a food adventure? Here are some top picks just for you!",
    ],
  },
  
  general: {
    tired: [
      "Energy-boosting options to get you going! âš¡",
      "Iron and protein to restore your vitality!",
      "Sustained energy, no crash guaranteed.",
    ],
    stressed: [
      "Comfort food that actually calms! ðŸ§˜",
      "Stress-busting nutrients on a plate.",
      "Your nervous system will thank you.",
    ],
    sad: [
      "Mood-lifting meals with love ðŸ’™",
      "Serotonin-boosting comfort awaits.",
      "Food that feels like a warm hug.",
    ],
    happy: [
      "Celebratory eats for celebratory vibes! ðŸŽ‰",
      "Keep that joy flowing with great food!",
      "Happy food for happy you!",
    ],
    anxious: [
      "Calming choices for a calmer you ðŸŒ¿",
      "Gentle, soothing options ahead.",
      "Peace on a plate.",
    ],
    calm: [
      "Balanced options for balanced vibes â˜¯ï¸",
      "Zen food for zen moments.",
      "Harmony in every bite.",
    ],
    energetic: [
      "Fuel for your fire! ðŸ”¥",
      "Power food for power moves!",
      "Keep that momentum going!",
    ],
    pms: [
      "Comfort and nutrients, together at last ðŸŒ¸",
      "What your body's craving, delivered.",
      "Self-care starts with great food.",
    ],
    default: [
      "Great options await! ðŸ½ï¸",
      "Delicious discoveries ahead!",
      "Let's find your perfect meal!",
    ],
  },
  
  surprise: {
    reveal: [
      "The universe has spoken! ðŸŽ° Your food destiny awaits!",
      "JACKPOT! The food gods have blessed you today!",
      "Spin complete! Your taste buds' adventure is SET!",
      "No thinking today. Just eating ðŸ˜Œ",
      "The wheel of deliciousness has decided!",
      "SURPRISE! Sometimes the best meals are unplanned!",
      "The slot machine of yum has chosen wisely!",
      "Random? More like RANDELICIOUS! ðŸŽ²",
      "The food fairy worked overtime on this one! âœ¨",
      "Plot twist! Your stomach didn't know it wanted this, but it DOES!",
      "And the winner is... YOUR TASTE BUDS! ðŸ†",
      "Trust the spin - fate knows your cravings!",
      "Destiny served! Get ready for flavor town!",
      "The randomizer outdid itself this time!",
      "Your unexpected feast awaits! Let's GO!",
    ],
    combo: [
      "This combo is *chef's kiss* ðŸ‘¨â€ðŸ³",
      "The stars aligned for THIS pairing!",
      "Hold onto your fork - this hits DIFFERENT!",
      "BOOM! Flavor explosion incoming! ðŸ’¥",
      "You didn't choose this meal - it chose YOU!",
      "ALERT: Legendary food combination detected!",
      "This isn't just food - this is a CULINARY EXPERIENCE!",
      "The algorithm achieved PERFECTION here!",
      "Your taste buds are about to party! ðŸŽ‰",
      "Secret menu item from the universe, unlocked!",
    ],
    happy: [
      "Happy + surprise = DOUBLE the joy! ðŸŒŸ",
      "Your good vibes just got a flavor boost!",
      "Happiness attracts deliciousness!",
      "The universe matched your energy perfectly!",
      "Joy + food = the ultimate combo!",
    ],
    adventurous: [
      "Adventure awaits on your plate! ðŸ—ºï¸",
      "Bold choices for bold souls!",
      "Your culinary journey begins NOW!",
      "Embrace the unexpected flavors!",
      "Fortune favors the hungry!",
    ],
    comforting: [
      "Sometimes surprises bring comfort ðŸ’«",
      "The universe knows you need this today.",
      "Trust the process - this combo is a warm hug.",
      "Life's little surprises include great food.",
      "Let go and let good food happen.",
    ],
    default: [
      "Your surprise is ready! ðŸŽ Let's see what fate decided!",
      "Mystery meal revealed! Adventure time!",
      "The randomizer has spoken! Here's your destiny!",
      "Roll with it! This might become your new favorite!",
      "Surprise selections are the spice of life!",
    ],
  },
  
  moodExplanations: {
    happy: "When you're happy, your brain produces more serotonin. Foods rich in tryptophan and vitamin D help maintain this beautiful state!",
    calm: "A calm state indicates balanced cortisol. Let's keep it that way with magnesium-rich and anti-inflammatory foods.",
    stressed: "Stress elevates cortisol and depletes B vitamins. Let's replenish with calming foods that support your nervous system.",
    tired: "Fatigue often signals iron deficiency or blood sugar imbalance. Complex carbs and iron-rich foods provide sustained energy.",
    energetic: "High energy means active metabolism! Protein and complex carbs will help maintain your momentum throughout the day.",
    pms: "Hormonal changes increase need for iron, magnesium, and B6. Foods addressing these needs can reduce discomfort significantly.",
    anxious: "Anxiety is linked to gut health and neurotransmitter imbalances. Probiotic-rich and omega-3 foods help calm the nervous system.",
    sad: "Low mood often correlates with low serotonin. Tryptophan-rich foods and vitamin D support natural mood elevation.",
  },
};

// ============================================
// HELPER FUNCTIONS
// ============================================

export type MoodKey = keyof typeof EI_COPY.coach;
export type SurpriseKey = keyof typeof EI_COPY.surprise;
export type Category = 'coach' | 'general' | 'surprise';

/**
 * Get a random copy string for any category and mood
 */
export function getRandomCopy(
  category: Category,
  mood: string
): string {
  const categoryData = EI_COPY[category];
  if (!categoryData) {
    return EI_COPY.coach.default[0];
  }
  
  const moodKey = mood.toLowerCase() as keyof typeof categoryData;
  const responses = categoryData[moodKey] || categoryData['default' as keyof typeof categoryData];
  
  if (!responses || !Array.isArray(responses) || responses.length === 0) {
    return "Let's find something delicious for you! ðŸ½ï¸";
  }
  
  return responses[Math.floor(Math.random() * responses.length)];
}

/**
 * Get multiple random responses for coach
 */
export function getMultipleCoachResponses(mood: string, count: number = 3): string[] {
  const moodKey = (mood.toLowerCase() as MoodKey) in EI_COPY.coach 
    ? mood.toLowerCase() as MoodKey 
    : 'default';
  const responses = [...EI_COPY.coach[moodKey]];
  const shuffled = responses.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(count, shuffled.length));
}

/**
 * Get mood explanation
 */
export function getMoodExplanation(mood: string): string {
  const moodKey = mood.toLowerCase() as keyof typeof EI_COPY.moodExplanations;
  return EI_COPY.moodExplanations[moodKey] || 
    "Let's find foods that match your current state and support your wellbeing!";
}

/**
 * Generate "Why this place?" template based on mood and budget
 */
export function getWhyTemplate(
  mood: string,
  budget: string,
  reputation?: string
): string {
  const moodBenefits: Record<string, string> = {
    tired: 'iron-rich and energizing dishes',
    stressed: 'calming, magnesium-rich comfort food',
    sad: 'serotonin-boosting comfort meals',
    happy: 'celebratory, vibrant flavors',
    anxious: 'soothing, gut-friendly options',
    calm: 'balanced, mindful portions',
    energetic: 'protein-packed power fuel',
    pms: 'iron and magnesium-rich comfort',
  };

  const benefit = moodBenefits[mood.toLowerCase()] || 'mood-boosting options';
  const budgetText = budget === 'â‚¹' ? 'budget-friendly' : budget === 'â‚¹â‚¹â‚¹' ? 'premium' : 'reasonably priced';
  const repText = reputation ? ` Known for ${reputation}.` : '';

  return `Perfect for ${benefit}. ${budgetText.charAt(0).toUpperCase() + budgetText.slice(1)} option.${repText}`;
}

/**
 * Get random surprise response by tone
 */
export function getRandomSurpriseResponse(tone?: string): string {
  if (tone && tone in EI_COPY.surprise) {
    const responses = EI_COPY.surprise[tone as SurpriseKey];
    return responses[Math.floor(Math.random() * responses.length)];
  }
  return getRandomCopy('surprise', 'reveal');
}

// ============================================
// MOOD DETECTION (LOCAL ONLY)
// ============================================

export type MoodType = 'happy' | 'calm' | 'stressed' | 'tired' | 'energetic' | 'pms' | 'anxious' | 'sad';

const MOOD_KEYWORDS: Record<MoodType, string[]> = {
  happy: ['happy', 'joy', 'joyful', 'great', 'amazing', 'wonderful', 'excited', 'fantastic', 'good', 'celebrate', 'love', 'awesome', 'thrilled', 'elated', 'cheerful', 'delighted'],
  calm: ['calm', 'peaceful', 'relaxed', 'serene', 'zen', 'tranquil', 'chill', 'mellow', 'content', 'centered', 'balanced', 'quiet', 'still'],
  stressed: ['stressed', 'stress', 'overwhelmed', 'pressure', 'deadline', 'busy', 'hectic', 'tense', 'frazzled', 'burnt out', 'burnout', 'overworked'],
  tired: ['tired', 'exhausted', 'sleepy', 'fatigued', 'drained', 'worn out', 'no energy', 'sluggish', 'lethargic', 'wiped', 'beat', 'weary'],
  energetic: ['energetic', 'pumped', 'motivated', 'active', 'ready', 'alive', 'vibrant', 'workout', 'gym', 'hyped', 'fired up', 'unstoppable'],
  pms: ['pms', 'cramps', 'period', 'hormonal', 'bloated', 'cycle', 'menstrual', 'that time'],
  anxious: ['anxious', 'worried', 'nervous', 'panic', 'fear', 'restless', 'uneasy', 'apprehensive', 'scared', 'on edge', 'tense'],
  sad: ['sad', 'down', 'blue', 'depressed', 'unhappy', 'melancholy', 'lonely', 'heartbroken', 'gloomy', 'low', 'miserable', 'upset', 'crying'],
};

export function detectMoodFromText(text: string): MoodType {
  const lowerText = text.toLowerCase();
  
  for (const [mood, keywords] of Object.entries(MOOD_KEYWORDS)) {
    if (keywords.some(keyword => lowerText.includes(keyword))) {
      return mood as MoodType;
    }
  }
  
  return 'calm'; // Default to calm
}
